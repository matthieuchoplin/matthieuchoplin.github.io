<div class="section" id="to-find-a-lock-in-the-db">
<h1>To find a lock in the DB:</h1>
<pre class="code postgresql"><a name="rest_code_c3316d7fe6f34606a5d0f4ad3723ae75-1"></a><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">pg_stat_activity</span> <span class="k">where</span> <span class="n">waiting</span><span class="o">=</span><span class="s1">&#39;t&#39;</span><span class="p">;</span>
</pre><p>Fix the lock:</p>
<pre class="code postgresql"><a name="rest_code_8993be870c7f4ce0b087238d1568aa18-1"></a><span class="k">select</span> <span class="n">pg_cancel_backend</span><span class="p">(</span><span class="n">pid</span> <span class="nb">int</span><span class="p">)</span>
</pre><p>Where &quot;pid int&quot; is the pid you find with pg_stat_activity.</p>
<p>Sources:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.postgresql.org/docs/9.2/static/functions-admin.html">http://www.postgresql.org/docs/9.2/static/functions-admin.html</a></li>
<li><a class="reference external" href="http://wiki.postgresql.org/wiki/Lock_Monitoring">http://wiki.postgresql.org/wiki/Lock_Monitoring</a></li>
<li><a class="reference external" href="http://chrismiles.info/systemsadmin/databases/articles/viewing-current-postgresql-queries/">http://chrismiles.info/systemsadmin/databases/articles/viewing-current-postgresql-queries/</a></li>
</ul>
</div>
